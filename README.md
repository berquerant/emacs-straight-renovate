# emacs-straight-renovate

```
‚ùØ python -m straight.cli --help
usage: cli.py [-h] [--default-el DEFAULT_EL] [--repodir REPODIR]
              [--renovate-lock RENOVATE_LOCK] [--failfast] [--rnv RNV] [--debug]
              {gen,lock} ...

Applying Renovate to `straight-default.el` in Emacs

positional arguments:
  {gen,lock}
    gen                 generate renovate lock file
    lock                generate straight-default.el

options:
  -h, --help            show this help message and exit
  --default-el, -e DEFAULT_EL
                        straight-default.el
  --repodir, -d REPODIR
                        straight/repos
  --renovate-lock, -r RENOVATE_LOCK
                        lockfile for renovate
  --failfast, -f        exit on the first failure
  --rnv RNV             rnv command
  --debug               enable debug log

First, generate the lock file for renovate.

python -m emacs-straight-renovate -e /path/to/straight-default.el -d /path/to/straight/repos -r /path/to/lockfile gen

Then, add following custom manager to renovate.json.

{
  "customType": "regex",
  "description": "Generated by emacs-straight-renovate",
  "fileMatch": ["LOCKFILE"],
  "matchStrings": ["depName=(?<depName>.+) datasource=(?<datasource>[a-z-]+) value=(?<currentValue>.+)"]
}

If Renovate updates lockfile, apply them to straight-default.el.

python -m emacs-straight-renovate -e /path/to/straight-default.el -d /path/to/straight/repos -r /path/to/lockfile lock

Requirements:
- https://github.com/berquerant/rnv 0.2.0
```
